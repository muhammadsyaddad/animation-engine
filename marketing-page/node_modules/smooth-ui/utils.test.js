"use strict";

var _react = _interopRequireDefault(require("react"));

var _enzyme = require("enzyme");

var _styledComponents = _interopRequireWildcard(require("styled-components"));

var _defaultBreakpoints = _interopRequireDefault(require("./theme/defaultBreakpoints"));

var _utils = require("./utils");

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _templateObject7() {
  var data = _taggedTemplateLiteralLoose(["\n        color: blue;\n        ", ";\n      "]);

  _templateObject7 = function _templateObject7() {
    return data;
  };

  return data;
}

function _templateObject6() {
  var data = _taggedTemplateLiteralLoose(["\n        color: blue;\n        ", ";\n      "]);

  _templateObject6 = function _templateObject6() {
    return data;
  };

  return data;
}

function _templateObject5() {
  var data = _taggedTemplateLiteralLoose(["\n        color: blue;\n        ", ";\n      "]);

  _templateObject5 = function _templateObject5() {
    return data;
  };

  return data;
}

function _templateObject4() {
  var data = _taggedTemplateLiteralLoose(["\n        color: blue;\n        ", ";\n      "]);

  _templateObject4 = function _templateObject4() {
    return data;
  };

  return data;
}

function _templateObject3() {
  var data = _taggedTemplateLiteralLoose(["\n        color: blue;\n        ", ";\n      "]);

  _templateObject3 = function _templateObject3() {
    return data;
  };

  return data;
}

function _templateObject2() {
  var data = _taggedTemplateLiteralLoose(["\n        color: blue;\n        ", ";\n      "]);

  _templateObject2 = function _templateObject2() {
    return data;
  };

  return data;
}

function _templateObject() {
  var data = _taggedTemplateLiteralLoose(["\n        color: blue;\n        ", ";\n      "]);

  _templateObject = function _templateObject() {
    return data;
  };

  return data;
}

function _taggedTemplateLiteralLoose(strings, raw) { if (!raw) { raw = strings.slice(0); } strings.raw = raw; return strings; }

describe('utils', function () {
  var props;
  var shallowWithTheme;
  beforeEach(function () {
    props = {
      theme: {
        breakpoints: {
          xs: 0,
          sm: 5,
          md: 10,
          lg: 30
        }
      }
    };

    shallowWithTheme = function shallowWithTheme(tree, theme) {
      if (theme === void 0) {
        theme = props.theme;
      }

      var context = (0, _enzyme.shallow)(_react.default.createElement(_styledComponents.ThemeProvider, {
        theme: theme
      })).instance().getChildContext();
      return (0, _enzyme.shallow)(tree, {
        context: context
      });
    };
  });
  describe('#getBreakpoints', function () {
    it('should return breakpoints from theme', function () {
      expect((0, _utils.getBreakpoints)(props)).toEqual({
        xs: 0,
        sm: 5,
        md: 10,
        lg: 30
      });
      expect((0, _utils.getBreakpoints)()).toBe(_defaultBreakpoints.default);
    });
  });
  describe('#getBreakpointsEntries', function () {
    it('should give sorted breakpoints entries', function () {
      expect((0, _utils.getBreakpointsEntries)(props)).toEqual([['xs', 0], ['sm', 5], ['md', 10], ['lg', 30]]);
    });
  });
  describe('#getNextBreakpoint', function () {
    it('should return next breakpoint', function () {
      expect((0, _utils.getNextBreakpoint)('xs', props)).toBe('sm');
      expect((0, _utils.getNextBreakpoint)('sm', props)).toBe('md');
      expect((0, _utils.getNextBreakpoint)('lg', props)).toBe(null);
    });
  });
  describe('#getPreviousBreakpoint', function () {
    it('should return next breakpoint', function () {
      expect((0, _utils.getPreviousBreakpoint)('xs', props)).toBe(null);
      expect((0, _utils.getPreviousBreakpoint)('sm', props)).toBe('xs');
      expect((0, _utils.getPreviousBreakpoint)('lg', props)).toBe('md');
    });
  });
  describe('#getBreakpointMin', function () {
    it('should return breakpoint minimum value', function () {
      expect((0, _utils.getBreakpointMin)('xs', props)).toBe(null);
      expect((0, _utils.getBreakpointMin)('sm', props)).toBe(5);
      expect((0, _utils.getBreakpointMin)('md', props)).toBe(10);
      expect((0, _utils.getBreakpointMin)('lg', props)).toBe(30);
    });
  });
  describe('#getBreakpointMax', function () {
    it('should return breakpoint maximum value', function () {
      expect((0, _utils.getBreakpointMax)('xs', props)).toBe(4.98);
      expect((0, _utils.getBreakpointMax)('sm', props)).toBe(9.98);
      expect((0, _utils.getBreakpointMax)('md', props)).toBe(29.98);
      expect((0, _utils.getBreakpointMax)('lg', props)).toBe(null);
    });
  });
  describe('#up', function () {
    it('should generate a media query', function () {
      var Dummy = _styledComponents.default.div(_templateObject(), (0, _utils.up)('md', 'color: red'));

      var wrapper = shallowWithTheme(_react.default.createElement(Dummy, null));
      expect(wrapper).toHaveStyleRule('color', 'blue');
      expect(wrapper).toHaveStyleRule('color', 'red', {
        media: '(min-width:10px)'
      });
    });
    it('should not add a media query if smallest', function () {
      var Dummy = _styledComponents.default.div(_templateObject2(), (0, _utils.up)('xs', 'color: red'));

      var wrapper = shallowWithTheme(_react.default.createElement(Dummy, null));
      expect(wrapper).toHaveStyleRule('color', 'red');
    });
  });
  describe('#down', function () {
    it('should generate a media query', function () {
      var Dummy = _styledComponents.default.div(_templateObject3(), (0, _utils.down)('md', 'color: red'));

      var wrapper = shallowWithTheme(_react.default.createElement(Dummy, null));
      expect(wrapper).toHaveStyleRule('color', 'blue');
      expect(wrapper).toHaveStyleRule('color', 'red', {
        media: '(max-width:9.98px)'
      });
    });
    it('should not add a media query if largest', function () {
      var Dummy = _styledComponents.default.div(_templateObject4(), (0, _utils.down)('lg', 'color: red'));

      var wrapper = shallowWithTheme(_react.default.createElement(Dummy, null));
      expect(wrapper).toHaveStyleRule('color', 'red');
    });
  });
  describe('#between', function () {
    it('should return only max if smallest', function () {
      var Dummy = _styledComponents.default.div(_templateObject5(), (0, _utils.between)('xs', 'sm', 'color: red'));

      var wrapper = shallowWithTheme(_react.default.createElement(Dummy, null));
      expect(wrapper).toHaveStyleRule('color', 'blue');
      expect(wrapper).toHaveStyleRule('color', 'red', {
        media: '(max-width:4.98px)'
      });
    });
    it('should return only min if largest', function () {
      var Dummy = _styledComponents.default.div(_templateObject6(), (0, _utils.between)('md', 'lg', 'color: red'));

      var wrapper = shallowWithTheme(_react.default.createElement(Dummy, null));
      expect(wrapper).toHaveStyleRule('color', 'blue');
      expect(wrapper).toHaveStyleRule('color', 'red', {
        media: '(min-width:10px)'
      });
    });
    it('should return max and min if middle', function () {
      var Dummy = _styledComponents.default.div(_templateObject7(), (0, _utils.between)('sm', 'md', 'color: red'));

      var wrapper = shallowWithTheme(_react.default.createElement(Dummy, null));
      expect(wrapper).toHaveStyleRule('color', 'blue');
      expect(wrapper).toHaveStyleRule('color', 'red', {
        media: '(min-width:5px) and (max-width:9.98px)'
      });
    });
  });
  describe('#resolveUnit', function () {
    it('should put a unit automatically on number', function () {
      expect((0, _utils.resolveUnit)(10)).toBe('10px');
      expect((0, _utils.resolveUnit)(10.5)).toBe('10.5px');
      expect((0, _utils.resolveUnit)('10.5px')).toBe('10.5px');
      expect((0, _utils.resolveUnit)('10.5rem')).toBe('10.5rem');
    });
  });
  describe('#calc', function () {
    it('should calc without unit', function () {
      expect((0, _utils.calc)(10, function (x) {
        return x + 1;
      })).toBe('11px');
      expect((0, _utils.calc)('10px', function (x) {
        return x + 1;
      })).toBe('11px');
      expect((0, _utils.calc)('10rem', function (x) {
        return x + 1;
      })).toBe('11rem');
    });
  });
});